#include <bits/stdc++.h>using namespace std; typedef long long ll;typedef vector<ll> vecl; /* */typedef vector<string> vecs;typedef map<int, int> mpii; /* */typedef map<ll, ll> mpll;typedef unordered_map<int, int> umpii;/* */typedef map<int, string> mpis;typedef unordered_map<int, string> umpis;/* */typedef map<string, int> mpsi; #define for_loop(i, a, b) for (int i = a; i < b; i++)#define for_loopr(i, a, b) for (int i = a; i >= b; i--)#define pb push_back#define pob pop_back#define MOD 1000000007#define fi first#define se second#define print(x) cout << x << "\n" /* ================= DEBUG MACROS ================= */#ifndef ONLINE_JUDGE#define dbg(x) cerr << #x << " = " << x << "\n";#define dbg2(x, y) cerr << #x << " = " << x << " | " << #y << " = " << y << "\n";#define dbg3(x, y, z) cerr << #x << " = " << x << " | " << #y << " = " << y << " | " << #z << " = " << z << "\n"; template<class T> void dbg_v(vector<T> &v){    cerr << "[ ";    for(auto it : v) cerr << it << " ";    cerr << "]\n";}#else#define dbg(x)#define dbg2(x, y)#define dbg3(x, y, z)#define dbg_v(v)#endif/* ================================================ */ template<class T> void print_v(vector<T> &v){for(auto it:v){cout << it << " ";}cout << "\n";} void solve(){    int n;    cin >> n;    vector<int> a(n);    vector<int> b(n);    vector<int> c(n);     for_loop(i,0,n){        cin >> a[i];    }    for_loop(j,0,n){        cin >> b[j];    }    for_loop(k,0,n){        cin >> c[k];    }     vector<bool> vecAB(n,true);    vector<bool> vecBC(n, true);     for (int shift = 0; shift < n; shift++){        for (int t = 0; t < n; t++){            if(a[t] >= b[(t+shift) % n]){                vecAB[shift] = false;                break;            }        }    }    for (int shift = 0; shift < n; shift++)    {        for (int t = 0; t < n; t++)        {            if (b[t] >= c[(t + shift) % n])            {                vecBC[shift] = false;                break;            }        }    }     long long  sum = 0;     for (int i = 0; i < n; i++){        if(!vecAB[i]){            continue;        }        for (int j = 0; j < n; j++){            if(vecBC[j]){                sum += 1;            }        }    }     print(sum*n);} int main(){    ios_base::sync_with_stdio(false);    cin.tie(nullptr);    cout.tie(nullptr);     int t;    cin >> t;    while (t--)    {        solve();    }    return 0;}