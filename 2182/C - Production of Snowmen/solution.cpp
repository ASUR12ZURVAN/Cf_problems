#include <bits/stdc++.h>using namespace std; typedef long long ll; #define for_loop(i, a, b) for (int i = a; i < b; i++)#define print(x) cout << x << "\n" const int MAXN = 5005; int a[MAXN], b[MAXN], c[MAXN];bool vecAB[MAXN], vecBC[MAXN]; void solve(){    int n;    cin >> n;     for_loop(i, 0, n)    {        cin >> a[i];    }    for_loop(i, 0, n)    {        cin >> b[i];    }    for_loop(i, 0, n)    {        cin >> c[i];    }     // initialize to true    for_loop(i, 0, n)    {        vecAB[i] = true;        vecBC[i] = true;    }     for (int shift = 0; shift < n; shift++)    {        for (int t = 0; t < n; t++)        {            if (a[t] >= b[(t + shift) % n])            {                vecAB[shift] = false;                break;            }        }    }     for (int shift = 0; shift < n; shift++)    {        for (int t = 0; t < n; t++)        {            if (b[t] >= c[(t + shift) % n])            {                vecBC[shift] = false;                break;            }        }    }     long long sum = 0;     for (int i = 0; i < n; i++)    {        if (!vecAB[i])            continue;        for (int j = 0; j < n; j++)        {            if (vecBC[j])            {                sum += 1;            }        }    }     print(sum * n);} int main(){    ios_base::sync_with_stdio(false);    cin.tie(nullptr);     int t;    cin >> t;    while (t--)    {        solve();    }    return 0;}